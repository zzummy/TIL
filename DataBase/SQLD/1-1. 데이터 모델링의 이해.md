# 1장 데이터 모델링의 이해

​        

### 데이터 모델링이란

- 정보시스템을 구축하기 위한 데이터 관점의 업무 분석 기법
- 현실세게의 데이터에 대해 약속된 표기법에 의해 표현하는 과정

![a](https://mblogthumb-phinf.pstatic.net/MjAxNjExMDRfNTEg/MDAxNDc4MjE5ODA0NTgx.C_IIOauPdGultmSWICFoQs-7XHsyE1yE44FaV9jKtz8g.DMBnGt4_zDq8Ec8mxYt4PI8pyw8ZT4u25zPsliUEuRYg.JPEG.tomatosoft/2016-11-02_15%3B07%3B33.jpg?type=w800)



​      

### 모델링 특징

1) 추상화 : 현실세계를 일정 형식에 맞춰 표현
2) 단순화 : 복잡한 현실세계를 약속된 규약을 통해 쉽게 이해할 수 있도록 함
3) 명확화 : 애매모호함 제거, 정확하게 현상 기술

​      

### 모델링 관점

1. 데이터 관점 (What) : 업무가 어떤 데이터와 관련이 있는지, 데이터 간의 관계는 무엇인지에 대해 모델링
2.  프로세스 관점 (How) : 실제하고 있는 업무는 무엇인지, 무엇을 해야하는지를 모델링
3. 상관 관점 (Interaction) : 업무가 처리하는 일의 방법에 따라 데이터는 어떻게 영향을 받고 있는지 모델링

​      

### 모델링의 중요성

1. 파급효과 
2. 간결한 표현
3. 데이터 품질 

​      

### 모델링의 유의성

1. 중복 : 여러 장소에 같은 정보 저장
2. 비유연성 : 사소한 업무 변경에 데이터 모델이 수시로 변경되면 안됨 -> 분리해서 유연성 UP
3. 비일관성 : 신용 상태에 대한 갱신 없이 고객의 납부 이력 정보 갱신 안됨

​      

### 모델링 3요소

1. 객체(엔티티) things □
2. 속성 attributes ○
3. 관계 relationships ◇

​      

### 모델링 과정

1. 개념적 데이터 모델링  
   - 추상화 수준이 높고, 업무 중심적이며 포관적인 수준의 모델링 진행
   - 전시적 데이터 모델링
   - E-R 다이어그램 생성
   - EA 수립 시 많이 이용
2. 논리적 데이터 모델링  
   - 시스템으로 구축하고자 하는 업무에 대해 key, 속성, 관계 등을 정확하게 표현
   - 재사용성이 높음
   - 정규화 수행
   - 데이터 모델링의 핵심 단계로 데이터 모델링이 최종적으로 완료된 상태
3. 물리적 데이터 모델링  
   - 실제로 데이터베이스에 이식할 수 있도록 성능, 저장 등 물리적인 성격 고려하여 설계

​      

### 데이터 독립성 요소

![image-20220524231101512](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=http%3A%2F%2Fcfile30.uf.tistory.com%2Fimage%2F9983FE405BF834A51178D4)

> ANSI-SPARC에서 정의한 데이터베이스 3단계 구조

​        

1. 외부 스키마 (External Schema)
   - 여러 개의 사용자 관점으로 구성, 즉 개개 사용자가 보는 개인적 DB 스키마
   - 응용 프로그래머가 접근하는 DB 정의
2. 개념 스키마 (Conceptual Schema)
   - 모든 사용자 관점을 **통합**한 조직 전체의 DB를 기술한 스키마
     - 논리적 데이터 독립성 : 개념 스키마가 변경되어도 외부 스키마에 영향 없음
3. 내부 스키마 (Internal Schema)
   - DB가 물리적으로 저장된 형식
   - 실제 데이터가 저장되는 방법을 표현하는 스키마
     - 물리적 데이터 독립성 : 내부 스키마가 변경되어도 외부/개념 스키마에 영향 없음

​      

### 데이터 독립성의 효과

1. 각 뷰의 독립성을 유지
2. 계층별 뷰에 영향을 주지 않고 변경 가능
3. 단계별 스키마에 따라 DDL과 DML이 다름을 제공

​      

### 데이터 모델 표기법

- 1976, 피터첸이 E-R Model 표기법을 만듬

- ERD 작성 순서
  1. 엔티티를 그린다.
  2. 엔티티를 적절하게 배치한다.
  3. 엔티티간 관계를 설정한다.
  4. 관계명을 기술한다.
  5. 관계의 참여도를 기술한다. (관계차수 표현)
  6. 관계의 필수여부를 기술한다.
- 가장 중요한 엔티티 : 왼쪽 상단에서 조금 아래쪽 중앙에 배치 (눈의 흐름 생각!)
- 업무 흐름 중심인 엔티티 : 다른 엔티티와 많은 관계를 가지고 있으므로 중앙에 배치
- 관계의 명칭은 관계 표현에 있어서 매우 중요
- 하나의 관계는 실선 표기, 다수 참여의 관계는 까마귀발 모양

​      

### 좋은 데이터 모델의 요소

1. 완전성 : 업무에서 필요로 하는 모든 데이터가 데이터 모델에 정의 
2. 중복 배제 : 하나의 DB 내 동일한 사실은 한 번만 기록
3. 업무 규칙 : 수많은 업무 규칙을 데이터 모델에 표현하고, 모든 사용자가 공유할 수 있도록 제공
4. 데이터 재사용 : 통합 모델, 데이터가 애플리케이션에 대해 독립적으로 설계
5. 의사소통 : 데이터 모델이 의사소통 도구로서의 역할 수행, 업무 규칙들이 데이터 모델에 자세하게 표현
6. 통합성 : 데이터가 한 번만 정의되고 다른 영역에서 참조 및 활용

​      

---

​    

### 엔티티란 

- 업무에 필요하고 유용한 정보를 저장/관리 위한 집합적인 것
- 테이블!

​    

### 엔티티 특징

1. 반드시 해당 업무에서 필요하고 관리하고자 하는 정보여야함 (ex. 환자, 토익의 응시횟수 등)
2. 유일한 식별자에 의해 식별이 가능해야 함
3. 영속적으로 존재하는 인스턴스(행)의 집합이여야 함 ('한 개'가 아니라 '두 개 이상'의 인스턴스)
4. 업무 프로세스에 의해 이용되어야 함
5. 반드시 속성이 있어야 함
6. 다른 엔티티와 최소 한 개 이상의 관계가 있어야 함  
   (단, 통계성 엔티티나 코드성 엔티티의 경우 관계 생략 가능)

​    

### 엔티티 분류

1. 유무형에 따른 분류
   - 유형 엔티티    
     물리적인 형태가 있고 안정적이며 지속적으로 활용, 업무로부터 엔티티 구분할 때 가장 용이 (ex. 사원, 물품, 강사)
   - 개념 엔티티    
     물리적인 형태는 존재하지 않고 관리해야 할 개념적 정보로 구분이 되는 엔티티 (ex. 조직, 보험상품)
   - 사건 엔티티   
     업무를 수행함에 따라 발생되는 엔티티, 비교적 발생량이 많으며 각종 통계자료에 이용될 수 있음 (ex. 주문, 청구, 미납)
2. 발생시점에 따른 분류
   - 기본 엔티티(키 엔티티)   
     업무에 원래 존재하는 정보로, 다른 엔티티와 관계에 의해 생성되지 않고 독립적으로 생성 가능, 다른 엔테테의 부모 역할, 다른 엔티티로부터 주식별자를 상속받지 않고 자신의 고유한 주식별자를 가짐 (ex. 사원, 부서, 고객, 상품, 자재)
   - 중심 엔티티(메인 엔티티)    
     두 개 이상의 기본 엔티티로부터 발생되고, 업무에 있어서 중심적인 역할, 데이터 양이 많이 발생되고 다른 엔티티와의 관계를 통해 많은 행위 엔티티를 생성함 (ex. 계약, 사고, 예금원장, 청구, 주문, 매출)
   - 행위 엔티티   
     두 개 이상의 부모 엔티티로부터 발생되고 자주 내용이 바뀌거나 데이터량 증가, 분석 초기단계에서는 잘 나타나지 않고 상세 설계단계나 프로세스와 상관 모델링을 진행하면서 도출될 수 있음 (ex. 주문 목록, 사원 변경 이력)
3. 스스로 생성 여부
   - 독립 엔티티 / 의존 엔티티 

​        

### 엔티티 명명 규칙

- 현업의 업무 용어 사용
- 가능한 약어 사용하지 않음
- 단수 명사 사용
- 모든 엔티티에서 유일하게 이름 부여
- 엔티티 생성 의미대로 이름 부여 

​       

-----

​       

### 속성(Attribute)이란

- 업무에서 필요로 하는 인스턴스에서 관리하고자 하는 의미상 더 이상 분리되지 않는 최소의 데이터 단위
- 엔티티에 대한 자세하고 구체적인 정보를 나타냄
- 컬럼!

​        

### 속성의 관계

- 한 개의 엔티티는 두 개 이상의 인스턴스 집합
- 한 개의 엔티티는 두 개 이상의 속성을 가짐
- 한 개의 인스턴스에서 각각의 속성은 한 개의 속성값을 가짐

- 속성도 집합임

​         

### 속성의 특성에 따른 분류

1. 기본 속성 : 업무 분석을 통해 정의한 속성 (ex. 원금, 예치기간, 이자율)
2. 설계 속성 : 업무상 존재하지 않지만 설계하면서 도출 (ex. 코드성 속성, 일련번호, 예금분류)
3. 파생 속성 : 다른 속성으로부터 계산이나 변형되어 생성, 다른 속성의 영향 받아 변함(계산된 값)    
   -> 꼭 필요한 경우에만 정의 (정합성 유지를 위해)   
   데이터를 조회할 때 빠른 성능을 낼 수 있도록 하기 위해 원래 속성의 값을 계산하여 저장할 수 있도록 만든 속성 (ex. 이자 (**∵** 계산된 값))

​      

### 도메인이란

- 속성이 가질 수 있는 범위
- 즉, 엔티티 내에서 속성에 대한 데이터 타입과 크기 그리고 제약사항을 지정하는 것
- 도메인 정의 + 용어사전 => 용어적 표준과 데이터 타입의 일관성 확보

​         

### 속성의 명명 규칙

- 해당 업무에서 사용하는 이름 부여
- 서술식 속성명 사용 금지 (명사형 사용, 수식어/소유격 자제)
- 약어 사용 가급적 제한
- 전체 데이터 모델에서 유일한 이름 사용 (충돌 해결)

​       

------

​       

### 관계(relation)란

- 인스턴스 사이의 논리적인 연관성으로서, 존재 또는 행위로써 서로에게 연관성이 부여된 상태
- 엔티티와 엔티티 간 연관성 표현
- 관계 페어링 : 각 엔티티의 인스턴스들은 자신이 관련된 인스턴스와 관계의 [어커런스](https://wordrow.kr/%EC%9D%98%EB%AF%B8/%EC%96%B4%EC%BB%A4%EB%9F%B0%EC%8A%A4/)로 참여하는 형태

​         

### 클래스 다이어그램 관계

- ERD에서는 존재적 관계와 행위에 의한 관계를 구분하지 않지만(단일화된 표기법), 클래스 다이어그램에서는 구분함

- 연관관계(존재) : 항상 이용하는 관계 => 실선 (ex. 부원과 사원 엔티티 간의 '소속' 관계)
- 의존관계(행위) : 상대방 행위에 대해 관계가 형성 => 점선 (ex. 주문과 배송 엔티티 간의 '배송근거' 관계)

​       

### 관계의 표기법

- 관계명 : 애매한 동사 자제, 현재형으로 표현
- 관계차수 : 참여자의 수 표현 (1:1, 1:M, M:N)
- 관계선택사양 : 필수 관계, 선택 관계

​        

###  관계 체크 사항

1. 두 개의 엔티티 사이에 관심 있는 **연관규칙**이 존재하는가?
2. 두 개의 엔티티 사이에 **정보의 조합이 발생**되는가?
3. 업무기술서, 장표에 관계연결에 대한 **규칙**이 서술되어 있는가?
4. 업무기술서, 장표에 관계연결을 가능하게 하는 **동사**가 있는가?

​           

### 식별자란

- 하나의 엔티티에 구성된 여러 개의 속성 중에 엔티티를 대표할 수 있는 속성    
  (하나의 엔티티는 반드시 하나의 유일한 식별자가 존재)
- 엔티티 내에서 인스턴스들을 구분할 수 있는 구분자

​        

### 주식별자의 특징

1. 유일성 : 주식별자에 의해 엔티티 내에 모든 인스턴스들이 유일하게 구분됨
2. 최소성 : 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 함
3. 불변성 : 주식별자의 값은 자주 변하지 않는 것이어야 함
4. 존재성 : 주식별자가 지정되면 반드시 값이 들어와야 함 (Null 비허용)

​       

### 식별자 분류

1. 대표성 여부에 따른 분류
   - 주식별자 : 엔티티 내에서 각 어커런스를 구분할 수 있는 구분자, 타 엔티티와 참조관계 연결 가능
   - 보조식별자 : 엔티티 내에서 각 어커런스를 구분할 수 있으나 대표성을 가지지 못해 참조관계 연결 불가능
2. 스스로 생성 여부에 따른 분류
   - 내부식별자 : 엔티티 내부에서 스스로 만들어짐
   - 외부식별자 : 타 엔티티와의 관계를 통해 받아오는 식별자
3. 속성 수에 따른 분류
   - 단일식별자 : 하나의 속성으로 구성
   - 복합식별자 : 둘 이상의 속성으로 구성
4. 대체 여부에 따른 분류
   - 본질식별자 : 업무에 의해 만들어짐
   - 인조식별자 : 업무적으로 만들어지진 않지만, 원조식별자가 복잡한 구성을 갖고 있기 때문에 인위적으로 만듬

​         

### 주식별자 도출 기준

- 해당 업무에서 자주 사용되는 특성
- 이름으로 기술되는 것(명칭, 내역 등)은 가능하면 지정하지 않음
- 복합으로 구성 시, 너무 많은 속성이 포함되지 않도록 함

​        

### 식별자 관계

- 부모로부터 받은 식별자를 자식 엔티티의 주식별자로 사용 (강한 연결관계) => 실선
- null 불가, 반드시 부모 엔티티 생성 (1:1 또는 1:M 관계)
- 단점 : 지속적으로 연결하면 PK 증가 -> 개발 복잡성, 오류 가능성

​         

### 비식별자 관계

- 부모로부터 속성을 받았지만 자식 엔티티의 일반적인 속성으로 사용 (약한 연결관계) => 점선
- 부모 없는 자식 생성 가능
- 자식 엔티티에 별도의 주식별자를 생성하는 것이 유리하다고 판단될 때 외부식별자로 표현
- 단점 : 기준 속성이 상속되지 않음 -> 불필요한 조인 증가, 성능 저하

​    